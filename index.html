<!DOCTYPE html>
<html lang="en">
  <head>
    
    <style type="text/story">
    <![CDATA[//><!--

    Dear Reader,
    
    This simple HTML page is all about playing with some APIs and discovering 
    cool new stuff brought to us by the magical HTML5. Namely we will first use
    the HTML5 geolocation system (thanks to @rem) and try to find out from where
    our visitor is browsing our page. Then, based on the information she will 
    kindly allow us to gather, we will ask our friends at Yahoo! Geoplanet to
    give use the matching WOEID. This info will then allow us to do all kind of 
    cool stuff like get the current and upcoming weather (with Yahoo! Weather)
    or fetch some nice geolocated picture from Flickr to display in our page.
    An alternative way of getting the user's position by her IP address is also
    available, but less reliable.

    Sounds fun? Well it is!
    Let's go!
    
    //--><!]]></style>
        
    <style type="text/todo">
    <![CDATA[//><!--
     * use nice HTML5 tags
     * add flickr tags support?
     * do stupid stuff with the Twitter API?
    //--><!]]></style>
    
    <meta charset="utf-8" />

    <title>g9nWthr</title>
  	
    <link href="http://fonts.googleapis.com/css?family=Kreon" rel="stylesheet" type="text/css">
  	
    <link rel="stylesheet" type="text/css" href="style.css" media="screen" />

    <script type="text/javascript" src="gga.js"></script>
    <script type="text/javascript" src="g9n.js"></script>
    
    <script type="text/javascript">
        // dev & debug stuff
        (function(window, document, undefined) {
            var displayWindowSize = function() {
                var w = 0, h = 0;
                // stolen from here
                // http://www.howtocreate.co.uk/tutorials/javascript/browserwindow
                if( typeof( window.innerWidth ) == 'number' ) {
                    //Non-IE
                    w = window.innerWidth;
                    h = window.innerHeight;
                } else if( document.documentElement && ( document.documentElement.clientWidth || document.documentElement.clientHeight ) ) {
                    //IE 6+ in 'standards compliant mode'
                    w = document.documentElement.clientWidth;
                    h = document.documentElement.clientHeight;
                } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
                    //IE 4 compatible
                    w = document.body.clientWidth;
                    h = document.body.clientHeight;
                }
                document.getElementById('sizeInfoBlock').innerHTML = w+'x'+h
            };
            
            var init = function() {
                var debugNode = document.createElement('div');  
                debugNode.id = 'sizeInfoBlock';
                debugNode.style.position = 'fixed';
                debugNode.style.left = '0px';
                debugNode.style.bottom = '0px';
                debugNode.style.padding = '5px';
                debugNode.style.color = '#FFFFFF';
                debugNode.style['background-color'] = '#ff0000';
                document.body.appendChild(debugNode);
                displayWindowSize();
                window.addEventListener ? window.addEventListener('resize', displayWindowSize, false) : window.attachEvent('onresize', displayWindowSize);
            };
            
            //window.addEventListener ? window.addEventListener('load', init, false) : window.attachEvent('onload', init);
        }(window, document));
    </script>
  </head>
  
  <body>
  
    <div id="geoposition">
  
      <div id="location">
        <p id="location-message">
          Finding your location: <span id="status">checking...</span>
        </p>
        <span id="location-buttons">
          <a href="#" id="html5" title="Detect your location using the HTML5 API">HTML5</a>
          <a href="#" id="ip" title="Detect your location using your IP address">IP</a>
        </span>
      </div>
          
      <div id="weather">
      </div>
	    
      <noscript>
        <div id="no-script">Damn! We can't do nothing nowadays without JavaScript mam'!</div>
      </noscript>

    </div>

    <!-- Github ribbon -->
    <div id="github">
        <a id="github-link" href="http://github.com/maximevaly/g9nWthr/">
            <img id="github-img" 
                src="https://a248.e.akamai.net/assets.github.com/img/ce742187c818c67d98af16f96ed21c00160c234a/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f677261795f3664366436642e706e67" alt="Fork me on GitHub">
            <span id="github-text">Fork me on github!</span>
        </a>
    </div>
    
    
    <script type="text/javascript" src="wthr.js"></script>

  </body>
</html>

